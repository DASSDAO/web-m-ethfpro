(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["6c59b303"],{"0949":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"mypage"},[i("TitleBar",{attrs:{titleTx:t.title}}),i("div",{staticClass:"block"},[i("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[i("span",{staticClass:"tx-minor"},[t._v(t._s(t.$t("transactionamount")))]),i("span",{staticClass:"tx-minor"},[t._v(t._s(t.$t("orderno"))+"ï¼š"+t._s(t.$route.query.item.remark))])]),i("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[i("span",[i("span",{staticStyle:{color:"red","font-weight":"700","font-size":"22px"}},[t._v(t._s(t.$route.query.item.value))]),t._v(" CNY\n      ")]),i("span",{staticStyle:{color:"red","font-size":"18px"}},[t._v(t._s(t.showStatus(t.$route.query.type,t.$route.query.item.status)))])]),i("div",{staticClass:"tx-minor"},[t._v("\n      "+t._s(t.$t("amount"))+"\n      "),i("span",{staticStyle:{color:"black","font-weight":"700"}},[t._v(t._s(t.$route.query.item.amount))]),t._v(" ETH\n    ")]),i("div",{staticClass:"tx-minor"},[t._v("\n      "+t._s(t.$t("unitprice"))+"\n      "),i("span",{staticStyle:{color:"black","font-weight":"700"}},[t._v(t._s(t.$route.query.item.buy_price))]),t._v(" CNY/ETH\n    ")])]),i("div",{staticClass:"block",staticStyle:{"margin-top":"10px","padding-top":"20px","padding-bottom":"30px"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.showcountDown&&!t.isTimeOut,expression:"showcountDown&&!isTimeOut"}],staticStyle:{"align-self":"center",display:"flex","flex-direction":"column"}},[i("img",{staticStyle:{width:"40px",height:"40px","align-self":"center"},attrs:{src:"statics/alarm.png"}}),i("span",{staticStyle:{"align-self":"center",color:"green","font-size":"25px"}},[t._v(t._s(t.$t("countdown"))+t._s(t.countdown)+"S")]),i("span",{staticStyle:{"align-self":"center",color:"#6f7d8e","font-size":"13px"}},[t._v(t._s(t.timeouttip)+","+t._s(t.$t("timeoutcanceltip")))])]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isTimeOut,expression:"isTimeOut"}],staticStyle:{"align-self":"center",display:"flex","flex-direction":"column"}},[i("img",{staticStyle:{width:"54px",height:"54px","align-self":"center","margin-top":"10px"},attrs:{src:"statics/tr-failed.png"}}),i("span",{staticStyle:{"align-self":"center",color:"red","font-size":"13px"}},[t._v(t._s(t.$t("alreadytimeouttip")))])])]),t.showcountDown&&!t.isTimeOut?i("q-btn",{staticClass:"btn-normal",attrs:{rounded:"",label:t.$t("confirmOrder"),color:"primary"},on:{click:t.confirmOrder}}):t._e()],1)},o=[];s._withStripped=!0;var n,a=i("9bfb"),r=(i("a002"),i("e7ea")),c={components:{TitleBar:a["a"]},data:function(){return{title:this.$t("orderdetail"),countdown:300,showcountDown:!0,isTimeOut:!1,orderCreateTime:0,timeouttip:"buy"===this.$route.query.type?this.$t("waitadrecept"):this.$t("waiturecept")}},mounted:function(){this.util.refreshGasPrice(this),console.log(this.$route.query.item),this.orderCreateTime=new Date(this.$route.query.item.create_at).getTime();var t=(new Date).getTime()-this.orderCreateTime;if(t>=3e5)switch(this.$route.query.item.status){case 0:this.isTimeOut=!0,this.cancelOrder();break;case-1:this.isTimeOut=!0;break}else this.countdown-=parseInt(t/1e3),this.orderCountdown()},methods:{confirmOrder:function(){this.showPswdInputDialog()},showPswdInputDialog:function(){var t=this,e=this;this.$q.dialog({message:this.$t("enterpswd"),prompt:{model:"",type:"text"},ok:this.$t("ok"),cancel:this.$t("cancel"),color:"secondary"}).then(function(i){if(""===i)toast(e.$t("pswdnull"));else{e.$q.loading.show({message:e.$t("txsubmiting"),spinnerSize:50});var s=e.util.getWallet(e,i);t.doConfrim(s)}}).catch(function(t){console.error(t)})},doConfrim:function(t){this.global.otcContract.connect(t);var e=this.$route.query.item.amount,i=parseFloat(e*this.global.bmobconfig.otcsellfee).toFixed(10),s=parseInt(this.$route.query.item.value);r["ethers"].utils.parseEther(parseFloat(e+i).toFixed(10)+""),r["ethers"].utils.bigNumberify(this.global.contractConfig.gasprice);console.log("-----"),console.log(e),console.log(s),console.log(this.$route.query.item.buyer),console.log(parseFloat(e+i).toFixed(10))},orderCountdown:function(){var t=this;n=setInterval(function(){t.countdown--,0===t.countdown&&(clearInterval(n),t.isTimeOut=!0,t.cancelOrder())},1e3)},cancelOrder:function(){this.$axios.put(this.global.apiconfig.otcbackapi+"/cancel_order?id="+this.$route.query.item.id,null,{headers:this.global.apiconfig.otcapiheader}).then(function(t){console.log(t)})},showStatus:function(t,e){switch(e){case 0:return"buy"===t?this.$t("waitadrecept"):this.$t("waiturecept");case 1:return this.$t("wait4pay");case 2:return this.$t("confirmpay");case 3:return this.$t("finished2");case-1:return this.$t("alreadycanceled")}},beforeDestroy:function(){clearInterval(n),this.$q.loading.hide()}}},l=c,u=(i("fac5"),i("2877")),d=Object(u["a"])(l,s,o,!1,null,"540eadd8",null);d.options.__file="OrderDetail.vue";e["default"]=d.exports},7686:function(t,e,i){},"9bfb":function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"title-bar"},[i("q-icon",{staticClass:"title-back-icon",attrs:{name:"navigate_before"},nativeOn:{click:function(e){return t.goBack(e)}}}),i("div",{staticClass:"title-tx"},[t._v(t._s(t.titleTx))])],1)},o=[];s._withStripped=!0;var n={props:["titleTx"],methods:{goBack:function(){this.$router.go(-1)}}},a=n,r=(i("a675"),i("2877")),c=Object(r["a"])(a,s,o,!1,null,null,null);c.options.__file="TitleBar.vue";e["a"]=c.exports},a675:function(t,e,i){"use strict";var s=i("ca51"),o=i.n(s);o.a},ca51:function(t,e,i){},fac5:function(t,e,i){"use strict";var s=i("7686"),o=i.n(s);o.a}}]);